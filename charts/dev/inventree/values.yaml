image:
  repository: tccr.io/truecharts/inventree
  tag: 0.8.4@sha256:57888f289eb9b2f03c141842eec5ae3946df1176ddcde4810c70307df8429edd
  pullPolicy: IfNotPresent
nginxImage:
  repository: tccr.io/truecharts/nginx
  tag: 1.23.3@sha256:0d92357c536291f04dad45f9af95dbdad46fb7a6e940f981a3a332f9d5279665
  pullPolicy: IfNotPresent
inventree:
  credentials:
    admin_mail: "test@example.com"
    admin_user: "testuser"
    admin_password: "secret"
  general:
    debug: false
    log_level: "INFO"
    plugins_enabled: false
    login_confirm_days: 3
    login_attempts: 5
  mail:
    backend: "django.core.mail.backends.smtp.EmailBackend"
    host: ""
    port: 587
    username: ""
    password: ""
    tls: false
    ssl: false
    sender: ""
service:
  main:
    ports:
      main:
        port: 10231
persistence:
  data:
    enabled: true
    mountPath: /home/inventree/data
    targetSelector:
      main:
        main: {}
        worker: {}
        nginx:
          mountPath: /var/www
  inventree-nginx:
    enabled: true
    type: configmap
    mountPath: /etc/nginx/conf.d
    subPath: default.conf
    objectName: config-nginx
    targetSelector:
      main:
        nginx: {}
    items:
      - key: nginx.conf
        path: default.conf
cnpg:
  main:
    enabled: true

    user: inventree
    database: inventree
redis:
  enabled: true

  redisUsername: default
portal:
  open:
    enabled: true
securityContext:
  container:
    readOnlyRootFilesystem: false
    runAsNonRoot: false
    runAsUser: 0
    runAsGroup: 0
workload:
  main:
    podSpec:
      initContainers:
        init:
          enabled: true
          type: init
          imageSelector: image
          command: ["sh", "-c"]
          args:
            - |-
              echo "Starting initialization..."
              cd /home/inventree || exit
              invoke update
              echo "Initialization finished!"
      containers:
        main:
          probes:
            liveness:
              type: tcp
            readiness:
              type: tcp
            startup:
              type: tcp
          envFrom:
            - secretRef:
                name: "secrets"
            - configMapRef:
                name: "config"
          env:
            INVENTREE_DB_PASSWORD:
              secretKeyRef:
                name: cnpg-main-user
                key: password
            INVENTREE_DB_HOST:
              secretKeyRef:
                name: cnpg-main-urls
                key: porthost

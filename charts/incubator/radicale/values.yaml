image:
  repository: tomsquest/docker-radicale
  pullPolicy: IfNotPresent
  tag: 3.1.7.0@sha256:ffc26d09d9ef85a477b9f22aa2f08bf35af8ddbee7bfbba192df7c567e21ebb5

# Docker image configuration docs:
# https://github.com/tomsquest/docker-radicale#custom-configuration

# Radicale configuration docs:
# https://radicale.org/v3.html#configuration

radicale:
  server:
    max_connections: 8
    max_content_length: 100000000
    timeout: 30
  encoding:
    request: utf-8
    stock: utf-8
  auth:
    delay: 1
    realm: Radicale - Password Required
  rights:
    type: owner_only
  storage:
    type: multifilesystem
    max_sync_token_age: 2592000
  web:
    type: internal
  logging:
    level: warning
    mask_passwords: true

security:
  PUID: 2999

securityContext:
  capabilities:
    drop:
      - ALL
    add:
      - SETUID
      - SETGID
      - KILL

podSecurityContext:
  runAsUser: 2999
  runAsGroup: 2999
  fsGroup: 2999

env:
  # Skip chown on /data by entrypoint.sh
  TAKE_FILE_OWNERSHIP: false

service:
  main:
    protocol: HTTP
    ports:
      main:
        targetPort: 5232
        port: 10255

persistence:
  config:
    enabled: true
    type: custom
    readOnly: true
    volumeSpec:
      configMap:
        name: radicale-config
  data:
    enabled: true
    mountPath: /data
